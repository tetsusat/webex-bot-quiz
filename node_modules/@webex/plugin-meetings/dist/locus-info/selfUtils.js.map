{"version":3,"sources":["selfUtils.js"],"names":["SelfUtils","parse","self","deviceId","muted","getMuted","lastModified","getLastModified","modifiedBy","getModifiedBy","guest","moderator","mediaStatus","getStatus","status","state","joinedWith","devices","find","device","url","creator","isCreator","selfId","id","selfIdentity","getSelfIdentity","selfUrl","removed","getSelves","oldSelf","newSelf","previous","current","updates","isUnadmittedGuest","isAdmittedGuest","isMutedByOthers","mutedByOthers","moderatorChanged","isMediaInactiveOrReleased","wasMediaInactiveOrReleased","isMediaInactive","mediaSessions","previousMediaStatus","getMediaStatus","currentMediaStatus","audio","MEDIA_STATE","inactive","direction","video","share","controls","meta","person","audioStatus","videoStatus","slides","videoSlidesStatus","changedSelf","_JOINED_","_LEFT_","reason","MEETING_END_REASON","INACTIVE","MEDIA_RELEASED","isLocusGuestUnadmitted","check","_IDLE_","isLocusGuestAdmitted","ParameterError","getSipUrl","partner","type","sipUri","_CALL_","sipUrl","emailAddress","email","media","mediaType","AUDIO","mediaContent","MediaContent","main","VIDEO","SHARE"],"mappings":"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","sourcesContent":["\nimport {\n  _IDLE_,\n  _JOINED_,\n  _CALL_,\n  _LEFT_,\n  MEETING_END_REASON,\n  MEDIA_STATE,\n  AUDIO,\n  VIDEO,\n  SHARE,\n  MediaContent\n} from '../constants';\nimport ParameterError from '../common/errors/parameter';\n\nconst SelfUtils = {};\n\n/**\n * parses the relevant values for self: muted, guest, moderator, mediaStatus, state, joinedWith, creator, id\n * @param {Object} self\n * @param {String} deviceId\n * @returns {undefined}\n */\nSelfUtils.parse = (self, deviceId) => {\n  if (self) {\n    return {\n      muted: SelfUtils.getMuted(self),\n      lastModified: SelfUtils.getLastModified(self),\n      modifiedBy: SelfUtils.getModifiedBy(self),\n      guest: self.guest,\n      moderator: self.moderator,\n      mediaStatus: SelfUtils.getStatus(self.status),\n      state: self.state,\n      // TODO: give a proper name . With same device as login or different login`\n      // Some times we might have joined with both mobile and web\n      joinedWith: self.devices.find((device) => deviceId === device.url),\n      creator: self.isCreator, // check if its used,\n      selfId: self.id,\n      selfIdentity: SelfUtils.getSelfIdentity(self),\n      selfUrl: self.url,\n      removed: self.removed\n    };\n  }\n\n  return null;\n};\n\nSelfUtils.getSelves = (oldSelf, newSelf, deviceId) => {\n  const previous = oldSelf && SelfUtils.parse(oldSelf, deviceId);\n  const current = newSelf && SelfUtils.parse(newSelf, deviceId);\n  const updates = {};\n\n  updates.isUnadmittedGuest = SelfUtils.isUnadmittedGuest(current);\n  updates.isAdmittedGuest = SelfUtils.isAdmittedGuest(previous, current);\n  updates.isMutedByOthers = SelfUtils.mutedByOthers(previous, current);\n  updates.moderatorChanged = SelfUtils.moderatorChanged(previous, current);\n  updates.isMediaInactiveOrReleased = SelfUtils.wasMediaInactiveOrReleased(previous, current);\n\n  updates.isMediaInactive = SelfUtils.isMediaInactive(previous, current);\n\n  return {\n    previous,\n    current,\n    updates\n  };\n};\n\nSelfUtils.isMediaInactive = (previous, current) => {\n  if (\n    previous &&\n    previous.joinedWith &&\n    previous.joinedWith.mediaSessions &&\n    current &&\n    current.joinedWith &&\n    current.joinedWith.mediaSessions\n  ) {\n    const previousMediaStatus = SelfUtils.getMediaStatus(\n      previous.joinedWith.mediaSessions\n    );\n    const currentMediaStatus = SelfUtils.getMediaStatus(\n      current.joinedWith.mediaSessions\n    );\n\n    if (\n      previousMediaStatus.audio && currentMediaStatus.audio &&\n      previousMediaStatus.audio.state !== MEDIA_STATE.inactive &&\n      currentMediaStatus.audio.state === MEDIA_STATE.inactive &&\n      currentMediaStatus.audio.direction !== MEDIA_STATE.inactive\n    ) {\n      return true;\n    }\n\n    if (\n      previousMediaStatus.video && currentMediaStatus.video &&\n      previousMediaStatus.video.state !== MEDIA_STATE.inactive &&\n      currentMediaStatus.video.state === MEDIA_STATE.inactive &&\n      currentMediaStatus.video.direction !== MEDIA_STATE.inactive\n    ) {\n      return true;\n    }\n\n    if (\n      previousMediaStatus.share && currentMediaStatus.share &&\n      previousMediaStatus.share.state !== MEDIA_STATE.inactive &&\n      currentMediaStatus.share.state === MEDIA_STATE.inactive &&\n      currentMediaStatus.share.direction !== MEDIA_STATE.inactive\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  return false;\n};\n\nSelfUtils.getLastModified = (self) => {\n  if (!self || !self.controls || !self.controls.audio || !self.controls.audio.meta || !self.controls.audio.meta.lastModified) {\n    return null;\n  }\n\n  return self.controls.audio.meta.lastModified;\n};\n\nSelfUtils.getModifiedBy = (self) => {\n  if (!self || !self.controls || !self.controls.audio || !self.controls.audio.meta || !self.controls.audio.meta.modifiedBy) {\n    return null;\n  }\n\n  return self.controls.audio.meta.modifiedBy;\n};\n\n/**\n * get the id from the self object\n * @param {Object} self\n * @returns {String}\n */\nSelfUtils.getSelfIdentity = (self) => {\n  if (!self && !self.person) {\n    return null;\n  }\n\n  return self.person.id;\n};\n\n/**\n * get the muted property from the self object\n * @param {Object} self\n * @returns {Boolean}\n */\nSelfUtils.getMuted = (self) => {\n  if (!self || !self.controls || !self.controls.audio) {\n    return null;\n  }\n\n  return self.controls.audio.muted;\n};\n\nSelfUtils.getStatus = (status) => ({\n  audio: status.audioStatus,\n  video: status.videoStatus,\n  slides: status.videoSlidesStatus\n});\n\n\n/**\n * @param {Object} oldSelf\n * @param {Object} changedSelf\n * @returns {Boolean}\n */\nSelfUtils.wasMediaInactiveOrReleased = (oldSelf = {}, changedSelf) => oldSelf.joinedWith && oldSelf.joinedWith.state === _JOINED_ && changedSelf.joinedWith.state === _LEFT_ &&\n (changedSelf.joinedWith.reason === MEETING_END_REASON.INACTIVE || changedSelf.joinedWith.reason === MEETING_END_REASON.MEDIA_RELEASED);\n\n\n/**\n * @param {Object} check\n * @returns {Boolean}\n */\nSelfUtils.isLocusGuestUnadmitted = (check) => check && check.guest && check.state === _IDLE_;\n\n/**\n * @param {Object} check\n * @returns {Boolean}\n */\nSelfUtils.isLocusGuestAdmitted = (check) => check && check.guest && check.state === _JOINED_;\n\n/**\n * @param {Object} self\n * @returns {Boolean}\n * @throws {Error} when self is undefined\n */\nSelfUtils.isUnadmittedGuest = (self) => {\n  if (!self) {\n    throw new ParameterError('self must be defined to determine if self is unadmitted as guest.');\n  }\n\n  return SelfUtils.isLocusGuestUnadmitted(self);\n};\n\nSelfUtils.moderatorChanged = (oldSelf, changedSelf) => {\n  if (!oldSelf) {\n    return true;\n  }\n  if (!changedSelf) {\n    throw new ParameterError('New self must be defined to determine if self transitioned moderator status.');\n  }\n\n  return oldSelf.moderator !== changedSelf.moderator;\n};\n\n/**\n * @param {Object} oldSelf\n * @param {Object} changedSelf\n * @returns {Boolean}\n * @throws {Error} if changed self was undefined\n */\nSelfUtils.isAdmittedGuest = (oldSelf, changedSelf) => {\n  if (!oldSelf) {\n    // if there was no previous locus, it couldn't have been admitted yet\n    return false;\n  }\n  if (!changedSelf) {\n    throw new ParameterError('New self must be defined to determine if self transitioned to admitted as guest.');\n  }\n\n  return SelfUtils.isLocusGuestUnadmitted(oldSelf) && SelfUtils.isLocusGuestAdmitted(changedSelf);\n};\n\nSelfUtils.mutedByOthers = (oldSelf = {}, changedSelf) => {\n  if (!changedSelf) {\n    throw new ParameterError('New self must be defined to determine if self was muted by others.');\n  }\n\n  return changedSelf.muted && (oldSelf.lastModified !== changedSelf.lastModified || oldSelf.modifiedBy !== changedSelf.modifiedBy);\n};\n\n/**\n * extract the sipUrl from the partner\n * @param {Object} partner\n * @param {Object} info\n * @returns {Object}\n */\n\nSelfUtils.getSipUrl = (partner, type, sipUri) => {\n  // For webex meeting the sipUrl gets updated in info parser\n  if (partner && type === _CALL_) {\n    return {sipUri: partner.person.sipUrl || partner.person.emailAddress || partner.person.email};\n  }\n\n  return {sipUri};\n};\n\nSelfUtils.getMediaStatus = (mediaSessions = []) => {\n  const mediaStatus = {\n    audio: {},\n    video: {},\n    share: {}\n  };\n\n  mediaStatus.audio = mediaSessions.find((media) => media.mediaType === AUDIO && media.mediaContent === MediaContent.main);\n  mediaStatus.video = mediaSessions.find((media) => media.mediaType === VIDEO && media.mediaContent === MediaContent.main);\n  mediaStatus.share = mediaSessions.find((media) => media.mediaType === SHARE && media.mediaContent === MediaContent.slides);\n\n  return mediaStatus;\n};\n\n\nexport default SelfUtils;\n"]}